import{G as $,H as B,d as R,r as h,I,J as M,l as N,c as y,a as i,b as n,w as t,e as u,K as V,g as _,u as q,s as f,L as F,f as a,M as J,o,F as T,k as j,t as G}from"./index-8ed98861.js";async function H(){const d=await $().get("/get_events");return B(d)}async function K(){return await H()}const z={class:"flex-col"},A={class:"text-2xl font-extrabold text-gray-600 flex items-center"},O={class:"my-1"},P={class:"my-3"},W=R({__name:"EventRecords",setup(d){const l=h(!1),v=h([]),c=I(),w=M(()=>c.getEventData()),b=async()=>{l.value=!0;try{const s=await K(),{success:r,message:m}=s;if(!r){f(m??"","warning"),l.value=!1;return}f("登入成功","success"),l.value=!1,c.setEventData(s.data)}catch(s){f(s.message,"error"),l.value=!1,c.setEventData(F),console.warn("使用假資料")}},D=(s,r)=>{v.value=[...s.imgData],c.selectEvent(r)};return N(async()=>{await b()}),(s,r)=>{const m=a("ChatLineSquare"),x=a("el-icon"),E=a("el-image"),k=a("el-carousel-item"),C=a("el-carousel"),p=a("el-table-column"),g=a("el-button"),S=a("el-table"),L=J("loading");return o(),y("div",z,[i("div",A,[n(x,{class:"mr-2"},{default:t(()=>[n(m)]),_:1}),u(" 活動紀錄 ")]),i("div",O,[i("div",P,[n(C,{interval:4e3,type:"card",height:"200px",autoplay:!1,arrow:"never","indicator-position":"none"},{default:t(()=>[(o(!0),y(T,null,j(v.value,e=>(o(),_(k,{key:e},{default:t(()=>[n(E,{src:e,fit:"contain",class:"w-full h-full"},null,8,["src"])]),_:2},1024))),128))]),_:1})]),i("div",null,[V((o(),_(S,{data:q(w),border:"",height:"530",style:{width:"100%"},"scrollbar-always-on":!0},{default:t(()=>[n(p,{prop:"date",label:"時間",sortable:!0}),n(p,{prop:"memberType",label:"參與情況 (參加/報名)"},{default:t(({row:e})=>[u(G(`${e.join} / ${e.totalJoin}`),1)]),_:1}),n(p,{label:"檢視圖片"},{default:t(e=>[e.row.isSelect?(o(),_(g,{key:1,type:"warning"},{default:t(()=>[u(" 正在檢視 ")]),_:1})):(o(),_(g,{key:0,type:"info",onClick:Q=>D(e.row,e.$index)},{default:t(()=>[u(" 檢視 ")]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"])),[[L,l.value]])])])])}}});export{W as default};
